{% extends "layout.html" %}
{% block content %}

<h2>üåç Global Student Chat</h2>
<p class="text-muted">Anyone can ask doubts or help others</p>

<hr>

<div class="border p-3 mb-3" style="height:300px; overflow-y:auto;">
    {% for msg in messages %}
        <div class="d-flex justify-content-between align-items-start mb-2">
            <div>
                <strong>{{ msg.user.username }}</strong>
                <small class="text-muted">
                    ({{ msg.timestamp.strftime('%d %b %H:%M') }})
                </small><br>
                {{ msg.content }}
            </div>

            {% if msg.user_id == current_user.id %}
            <form method="POST"
                  action="{{ url_for('delete_message', message_id=msg.id) }}"
                  onsubmit="return confirm('Delete this message?');">
                <button class="btn btn-sm btn-danger">Delete</button>
            </form>
            {% endif %}
        </div>
        <hr>
    {% endfor %}
</div>

<form method="POST">
    {{ form.hidden_tag() }}
    {{ form.message(class="form-control", placeholder="Type your message...") }}
    <br>
    {{ form.submit(class="btn btn-primary") }}
</form>

{% endblock %}